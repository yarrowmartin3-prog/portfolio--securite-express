<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>NovaSuite ‚Ä¢ Accueil</title>
  <meta name="description" content="D√©couvrez NovaSuite : Audit IA Express, Cybers√©curit√©, et Int√©gration Nova (LM Studio/Ollama) pour votre projet web."/>
  <meta property="og:title" content="NovaSuite ‚Ä¢ Accueil"/>
  <meta property="og:description" content="La solution cl√© en main pour l'IA et la s√©curit√© web."/>
  <meta property="og:image" content="assets/banner-novasuite.jpg"/>
  <meta property="og:url" content="https://novasuite.ca/index.html"/>
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg"/>
  <link rel="stylesheet" href="assets/nova.css?v=9999"/>
  <style>
    /* ===== Hero NovaSuite (isol√©, sans conflit) ===== */
    .ns-hero{position:relative;border-radius:12px;overflow:hidden;margin-top:10px;
             box-shadow:0 6px 25px rgba(0,0,0,.4)}
    .ns-hero::before{
      content:"";position:absolute;inset:0;
      background-image:url('assets/banner-novasuite.jpg');
      background-size:cover;background-position:center;
      filter:brightness(.65)
    }
    .ns-hero__inner{
      position:relative;min-height:380px;
      display:flex;flex-direction:column;justify-content:center;align-items:center;
      text-align:center;padding:20px
    }
    .ns-hero h2{margin:0 0 10px;font-size:clamp(1.8rem,3vw,2.4rem);color:#fff;
                text-shadow:0 2px 8px rgba(0,0,0,.5)}
    .ns-hero p{max-width:640px;margin:0 0 18px;color:#e2e8f0;
               text-shadow:0 2px 6px rgba(0,0,0,.6)}
    .ns-hero__actions{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .ns-btn{display:inline-flex;align-items:center;justify-content:center;
            padding:12px 16px;border-radius:12px;font-weight:800;text-decoration:none}
    .ns-btn--primary{background:linear-gradient(180deg,#1ea7ff,#1293ee);color:#031425;border:0}
    .ns-btn--gold{background:linear-gradient(180deg,#ffe08a,#ffc233);color:#3b2a00;border:0}
    .ns-btn:hover{filter:brightness(1.05)}
    @media (max-width:700px){
      .ns-hero__inner{min-height:460px;padding:16px}
      .ns-btn{min-width:180px;padding:10px 14px}
    }
  </style>

</head>

<style>
  /* Style sp√©cifique du bouton flottant (FAB) et de la bo√Æte de discussion */
  .nova-fab{
    position:fixed; right:16px; bottom:16px; z-index:9999;
    padding:12px 16px; border-radius:999px; font-weight:800; text-decoration:none;
    background:linear-gradient(180deg,#1ea7ff,#1293ee); color:#031425; border:none;
    box-shadow:0 10px 28px rgba(0,0,0,.35);
    -webkit-tap-highlight-color: transparent;
    cursor:pointer;
  }
  .nova-box{
    position:fixed; right:16px; bottom:65px; z-index:9998;
    width:300px; height:400px; background-color:#1e293b; border-radius:12px;
    box-shadow:0 10px 28px rgba(0,0,0,.5);
    display:flex; flex-direction:column;
  }
  .nova-head{
    padding:10px 15px; background-color:#0f172a; color:#fff;
    border-top-left-radius:12px; border-top-right-radius:12px; font-weight:bold;
  }
  .nova-log{
    flex-grow:1; padding:15px; overflow-y:auto; color:#fff; font-size:0.9em;
  }
  .nova-bar{
    display:flex; padding:10px; background-color:#0f172a;
    border-bottom-left-radius:12px; border-bottom-right-radius:12px;
  }
  .nova-bar input{
    flex-grow:1; padding:8px; border:none; border-radius:6px; margin-right:8px;
    background-color:#334155; color:#fff;
  }
  .nova-bar button{
    padding:8px 12px; border:none; border-radius:6px; cursor:pointer;
    background-color:#1ea7ff; color:#031425; font-weight:bold;
  }

  @media (max-width:600px){
    .nova-fab{ padding:11px 15px; right:14px; bottom:14px; }
    .nova-box{
      width:90%; height:70%; right:5%; bottom:60px;
    }
  }
  /* √©vite chevauchement avec le bouton BuyMeACoffee bas de page */
  .wrap + .wrap:last-child{ margin-bottom:76px; }
</style>
<body>
  <header class="wrap">
  <a class="brand" href="/">
    <img class="logo" src="assets/logo-novasuite.png" alt="NovaSuite"/>
    <span>NovaSuite</span>
  </a>
  <div class="badge">Version v1 stable</div>
  <h1>NovaSuite : Votre succ√®s web avec l'IA ü§ñ et la Cybers√©curit√© üõ°Ô∏è.</h1>
</header>
<section class="ns-hero">
  <div class="ns-hero__inner">
    <h2>Audit IA Express & Int√©gration Nova (LM Studio / Ollama) üöÄ</h2>
    <p>
      NovaSuite vous fournit des diagnostics de s√©curit√© et de performance clairs, des recommandations concr√®tes, et l'**int√©gration assist√©e** de nos outils d'intelligence artificielle (LM Studio / Ollama) pour donner un avantage comp√©titif √† votre projet web. Choisissez la solution cl√© en main.
    </p>
    <div class="ns-hero__actions">
      <a href="#formules" class="ns-btn ns-btn--primary">Voir les formules</a>
      <a href="https://www.buymeacoffee.com/yarrowmart9" target="_blank" rel="noopener"
         class="ns-btn ns-btn--gold">‚òï Offrir un caf√© √† NovaSuite</a>
    </div>
  </div>
</section>
  <div id="formules" style="scroll-margin-top:100px;"></div>

  <main id="formules" class="wrap">
    <h2>Nos Formules D√©taill√©es</h2>
    
    <section class="card">
      <h2>Formule Audit Express</h2>
      <p><strong>249 $</strong> par audit<br/>Analyse rapide de votre site, rapport clair et recommandations concr√®tes.</p>
      <ul>
        <li>Audit de s√©curit√© et performance</li>
        <li>Rapport d√©taill√© avec recommandations</li>
        <li>Support par e‚Äëmail</li>
      </ul>
      <a href="https://buy.stripe.com/9B6dR9aPM98SeBp8CO2VG00" class="btn-primary" target="_blank" rel="noopener">Demander un audit</a>
    </section>

    <section class="card recommended">
      <h2>Formule Int√©gration Standard</h2>
      <div class="badge badge-blue">‚≠ê Recommand√©</div>
      <p><strong>499 $</strong> par projet<br/>Audit complet plus int√©gration assist√©e de nos outils IA.</p>
      <ul>
        <li>Audit complet de s√©curit√© et performance</li>
        <li>Int√©gration de mini‚Äësite IA/Chat Nova</li>
        <li>Recommandations d‚Äôoptimisation UX/UI</li>
        <li>Support par e‚Äëmail et chat</li>
      </ul>
      <a href="https://buy.stripe.com/eVqfZh5vsetcdxl7yK2VG01" class="btn-primary" target="_blank" rel="noopener">Commander maintenant</a>
    </section>

    <section class="card">
      <h2>Formule Premium</h2>
      <p><strong>999 $</strong> par projet<br/>Solution cl√© en main avec int√©gration compl√®te et suivi.</p>
      <ul>
        <li>Audit avanc√© et int√©gration IA</li>
        <li>Personnalisation du mini‚Äësite (branding)</li>
        <li>Mises √† jour et optimisations mensuelles</li>
        <li>Support premium (e‚Äëmail et chat prioritaire)</li>
      </ul>
<a href="https://buy.stripe.com/4gM5kDbTQ0CmbpdaKW2VG02" class="btn-primary" target="_blank" rel="noopener">Commander maintenant</a>
    </section>
  </main>

  <div class="wrap" style="text-align:center; margin-top:30px;">
    <a href="https://www.buymeacoffee.com/yarrowmart9" target="_blank" rel="noopener" class="btn-gold">‚òï Offrir un caf√© √† NovaSuite</a>
  </div>

  <footer class="wrap" style="margin-top:40px; text-align:center;">
    <p style="color:var(--text-dim); font-size:0.85em;">¬© 2025 NovaSuite ‚Ä¢ Tous droits r√©serv√©s</p>
  </footer>
  
  <button id="nova-fab" class="nova-fab" aria-expanded="false">üí¨ Nova</button>
  <div id="nova-box" class="nova-box" hidden>
    <div class="nova-head">Nova ‚Ä¢ Assistant local</div>
    <div id="nova-log" class="nova-log"></div>
    <form id="nova-form" class="nova-bar">
      <input id="nova-field" name="q" placeholder="Parlez √† Nova" autocomplete="off" />
      <button id="nova-send" type="submit">Envoyer</button>
    </form>
  </div>

  <script>
    // 4. Gestion de l'envoi de message (Connexion √† l'API locale)
    const API_ENDPOINT = 'http://127.0.0.1:8000/chat';
    let history = []; // Stockage de l'historique de la conversation

    form.addEventListener('submit', async (e) => { // NOTEZ l'ajout de 'async'
        e.preventDefault();
        const text = (field.value || '').trim();
        if (!text) return;

        // 1. Afficher le message de l'utilisateur
        const me = document.createElement('div');
        me.textContent = "Vous: " + text;
        log.appendChild(me);
        field.value = '';
        
        // 2. Afficher le message de chargement de Nova
        const bot = document.createElement('div');
        bot.textContent = "Nova: (R√©ponse en cours...)";
        log.appendChild(bot);
        log.scrollTop = log.scrollHeight;

        try {
            // 3. Appel √† l'API FastAPI locale
            const response = await fetch(API_ENDPOINT, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    // Note: x-site-key est vide pour le test local si SITE_ACCESS_KEY est vide dans main.py
                    // 'X-Site-Key': 'votre_site_key_secrete_si_necessaire' 
                },
                body: JSON.stringify({ 
                    message: text,
                    history: history // Envoi de l'historique
                })
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.detail || `Erreur HTTP: ${response.status}`);
            }

            const data = await response.json();
            const reply = data.reply || "Erreur: Pas de r√©ponse de l'IA.";

            // 4. Mettre √† jour l'historique et la r√©ponse
            history.push({ role: "user", content: text });
            history.push({ role: "assistant", content: reply });
            
            // 5. Remplacer le message de chargement par la r√©ponse r√©elle
            bot.textContent = "Nova: " + reply;

        } catch (error) {
            console.error('Erreur API NovaSuite:', error);
            bot.textContent = `Nova: Erreur de connexion au module local : ${error.message}`;
        }
        
        log.scrollTop = log.scrollHeight;
    });
  </script>
</html>
